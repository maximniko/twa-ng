import{a as D,b as d,c as E,d as _,g as J,h as b,i as S,j as K,k as Q,l as X,m as N,n as V,o as $,p as Y,q as Z,r as tt,s as et}from"./chunk-G2W2H6XC.js";import{Ba as P,Bb as z,Cb as H,Da as G,Ea as f,M as c,Ma as W,Oa as m,Pa as U,Qa as g,R,Ra as I,S as q,Sa as y,Ua as v,aa as o,ba as p,fb as F,gb as T,ia as h,ib as x,ja as u,l as B,oa as l,ua as O,v as L,va as A,wa as s,x as j,xa as a,ya as C}from"./chunk-PUITYL7L.js";var M=(()=>{class e{isInvalid(t){return t?.invalid&&(t?.dirty||t?.touched)}errors(t){return t?.errors}validationErrors(t,i){if(!t)return null;let n=[];return t?.required&&n.push(`${i} is required.`),t?.minlength&&n.push(`Minimum length of ${i} is ${t?.minlength.requiredLength}.`),t?.maxlength&&n.push(`Maximum length of ${i} is ${t?.maxlength.requiredLength}.`),t?.email&&n.push(`${i} must be an email address.`),t?.pattern&&n.push(`${i} is not valid.`),t?.invalidPhone&&n.push(`${i} is invalid phone.`),t?.invalidType&&n.push(`${i} is invalid type.`),n.join(`
`)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=c({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(i,n){},encapsulation:2})}}return e})();function it(e){return r=>{if(typeof r.value=="object"){if(!e.includes(r.value))return{invalidType:!0}}else if(e.indexOf(r.value)<0)return{invalidType:!0};return null}}function nt(e){return r=>{let t=r.value;if(t&&typeof t=="string"){let n=t.match(/^([10]\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/);if(n){if(n&&n[0]!==t)return{invalidType:!0}}else return{invalidType:!0}}let i=$.from(t);return i instanceof $&&(i.after(e),i.after(e))?{invalidType:!0}:null}}var dt=(e,r)=>({"is-invalid":e,"is-valid":r});function pt(e,r){if(e&1&&(s(0,"div",4),m(1),a()),e&2){let t=f();o(),g(" ",t.validationErrors(t.tagErrors,"Title")," ")}}var at=(()=>{class e extends M{constructor(t){super(),this.formBuilder=t,this.tagTitles=[],this.search=i=>i.pipe(L(300),j(),B(n=>n.length<2?[]:this.tagTitles.filter(k=>k.toLowerCase().indexOf(n.toLowerCase())>-1).slice(0,10)))}ngOnInit(){this.parentForm.addControl("tag",this.formBuilder.control(this.transactionItem?.tag.title??"",[d.minLength(3),d.maxLength(32)]))}get tag(){return this.parentForm.get("tag")}get tagErrors(){return this.errors(this.tag)}get isInvalidTag(){return this.isInvalid(this.tag)}static{this.\u0275fac=function(i){return new(i||e)(p(N))}}static{this.\u0275cmp=c({type:e,selectors:[["transaction-tag-input"]],inputs:{transactionItem:"transactionItem",parentForm:"parentForm"},standalone:!0,features:[I([],[{provide:E,useExisting:b}]),h,y],decls:5,vars:7,consts:[[1,"form-floating","mb-3"],["type","text","placeholder","Title","id","form-tag","formControlName","tag",1,"form-control",3,"focusFirst","ngbTypeahead","ngClass"],["for","form-tag"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(i,n){i&1&&(s(0,"div",0),C(1,"input",1),s(2,"label",2),m(3,"Title"),a(),u(4,pt,2,1,"div",3),a()),i&2&&(o(),l("focusFirst",!0)("ngbTypeahead",n.search)("ngClass",v(4,dt,n.isInvalidTag,n.parentForm.valid)),o(3),l("ngIf",n.isInvalidTag))},dependencies:[x,F,T,V,D,_,S,et],encapsulation:2})}}return e})();var ct=(e,r)=>({"is-invalid":e,"is-valid":r});function ut(e,r){if(e&1&&(s(0,"div",5),m(1),a()),e&2){let t=f();o(),g(" ",t.validationErrors(t.dateErrors,"Date")," ")}}var st=(()=>{class e extends M{constructor(t,i,n){super(),this.formBuilder=t,this.config=i,this.calendar=n,this.today=this.calendar.getToday(),i.maxDate=this.today,i.startDate=this.today,i.navigation="select",i.placement="top"}ngOnInit(){this.parentForm.addControl("date",this.formBuilder.control(this.today,[d.required,nt(this.today)]))}get date(){return this.parentForm.get("date")}get dateErrors(){return this.errors(this.date)}get isInvalidDate(){return this.isInvalid(this.date)}static{this.\u0275fac=function(i){return new(i||e)(p(N),p(Z),p(Y))}}static{this.\u0275cmp=c({type:e,selectors:[["transaction-date-input"]],inputs:{transactionItem:"transactionItem",parentForm:"parentForm"},standalone:!0,features:[I([],[{provide:E,useExisting:b}]),h,y],decls:6,vars:5,consts:[["d","ngbDatepicker"],[1,"form-floating","mb-3"],["id","form-date","placeholder","yyyy-mm-dd","formControlName","date","ngbDatepicker","",1,"form-control",3,"click","ngClass"],["for","form-date"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(i,n){if(i&1){let k=P();s(0,"div",1)(1,"input",2,0),G("click",function(){R(k);let mt=W(2);return q(mt.toggle())}),a(),s(3,"label",3),m(4,"Date"),a(),u(5,ut,2,1,"div",4),a()}i&2&&(o(),l("ngClass",v(2,ct,n.isInvalidDate,n.parentForm.valid)),o(4),l("ngIf",n.isInvalidDate))},dependencies:[x,F,T,V,D,_,S,tt],encapsulation:2})}}return e})();var ft=(e,r)=>r.id,lt=(e,r)=>({"is-invalid":e,"is-valid":r});function gt(e,r){if(e&1&&(s(0,"option",2),m(1),a()),e&2){let t=r.$implicit;l("ngValue",t),o(),U(t.title)}}function vt(e,r){if(e&1&&(s(0,"div",8),m(1),a()),e&2){let t=f();o(),g(" ",t.validationErrors(t.categoryErrors,"Category")," ")}}function ht(e,r){if(e&1&&(s(0,"div",8),m(1),a()),e&2){let t=f();o(),g(" ",t.validationErrors(t.totalErrors,"Total")," ")}}var Gt=(()=>{class e extends M{constructor(t,i){super(),this.formBuilder=t,this.categoriesService=i,this.categoriesList=[]}ngOnInit(){this.addControlCategory(),this.parentForm.addControl("total",this.formBuilder.control(this.transactionItem?.total??"",[d.required,d.min(1),d.max(1e9)]))}compareCategory(t,i){return t.id==i.id}addControlCategory(){this.categoriesService.list(new H({})).subscribe(t=>{this.categoriesList=t,this.parentForm.addControl("category",this.formBuilder.control(this.transactionItem?.category,[d.required,it(this.categoriesList)]))})}get category(){return this.parentForm.get("category")}get total(){return this.parentForm.get("total")}get categoryErrors(){return this.errors(this.category)}get totalErrors(){return this.errors(this.total)}get isInvalidCategory(){return this.isInvalid(this.category)}get isInvalidTotal(){return this.isInvalid(this.total)}static{this.\u0275fac=function(i){return new(i||e)(p(N),p(z))}}static{this.\u0275cmp=c({type:e,selectors:[["transaction-inputs"]],inputs:{transactionItem:"transactionItem",parentForm:"parentForm"},standalone:!0,features:[I([],[{provide:E,useExisting:b}]),h,y],decls:16,vars:15,consts:[[1,"form-floating","mb-3"],["type","text","id","form-category","formControlName","category",1,"form-select",3,"ngClass","compareWith"],[3,"ngValue"],["for","form-category"],["class","invalid-feedback",4,"ngIf"],[3,"transactionItem","parentForm"],["type","number","placeholder","Total","id","form-total","formControlName","total",1,"form-control",3,"ngClass"],["for","form-total"],[1,"invalid-feedback"]],template:function(i,n){i&1&&(s(0,"div",0)(1,"select",1)(2,"option"),m(3,"Select category"),a(),O(4,gt,2,2,"option",2,ft),a(),s(6,"label",3),m(7,"Category"),a(),u(8,vt,2,1,"div",4),a(),C(9,"transaction-tag-input",5),s(10,"div",0),C(11,"input",6),s(12,"label",7),m(13,"Total"),a(),u(14,ht,2,1,"div",4),a(),C(15,"transaction-date-input",5)),i&2&&(o(),l("ngClass",v(9,lt,n.isInvalidCategory,n.parentForm.valid))("compareWith",n.compareCategory),o(3),A(n.categoriesList),o(4),l("ngIf",n.isInvalidCategory),o(),l("transactionItem",n.transactionItem)("parentForm",n.parentForm),o(2),l("ngClass",v(12,lt,n.isInvalidTotal,n.parentForm.valid)),o(3),l("ngIf",n.isInvalidTotal),o(),l("transactionItem",n.transactionItem)("parentForm",n.parentForm))},dependencies:[x,F,T,V,Q,X,D,J,K,_,S,at,st],encapsulation:2})}}return e})();export{M as a,Gt as b};
