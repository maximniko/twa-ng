import{a as D,b as p,c as _,d as E,g as Q,h as b,i as S,j as W,k as X,l as Y,m as N,n as V,o as j,p as Z,q as tt,r as et,s as it}from"./chunk-5BYACR2K.js";import{Ba as U,Bb as J,Cb as K,Da as z,Ea as f,M as c,Ma as L,Oa as m,Pa as H,Qa as g,R as $,Ra as I,S as B,Sa as y,Ua as v,aa as a,ba as d,fb as F,gb as T,ia as h,ib as x,ja as u,l as O,oa as l,ua as P,v as q,va as G,wa as s,x as A,xa as o,ya as C}from"./chunk-UH2UHZL4.js";var M=(()=>{class e{isInvalid(t){return t?.invalid&&(t?.dirty||t?.touched)}errors(t){return t?.errors}validationErrors(t,i){if(!t)return null;let n=[];return t?.required&&n.push(`${i} is required.`),t?.minlength&&n.push(`Minimum length of ${i} is ${t?.minlength.requiredLength}.`),t?.maxlength&&n.push(`Maximum length of ${i} is ${t?.maxlength.requiredLength}.`),t?.email&&n.push(`${i} must be an email address.`),t?.pattern&&n.push(`${i} is not valid.`),t?.invalidPhone&&n.push(`${i} is invalid phone.`),t?.invalidType&&n.push(`${i} is invalid type.`),n.join(`
`)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=c({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(i,n){},encapsulation:2})}}return e})();function nt(e){return r=>{if(typeof r.value=="object"){if(!e.includes(r.value))return{invalidType:!0}}else if(e.indexOf(r.value)<0)return{invalidType:!0};return null}}function rt(e){return r=>{let t=r.value;if(t&&typeof t=="string"){let n=t.match(/^([10]\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/);if(n){if(n&&n[0]!==t)return{invalidType:!0}}else return{invalidType:!0}}let i=j.from(t);return i instanceof j&&(i.after(e),i.after(e))?{invalidType:!0}:null}}var pt=(e,r)=>({"is-invalid":e,"is-valid":r});function ct(e,r){if(e&1&&(s(0,"div",4),m(1),o()),e&2){let t=f();a(),g(" ",t.validationErrors(t.tagErrors,"Title")," ")}}var st=(()=>{class e extends M{constructor(t){super(),this.formBuilder=t,this.tagTitles=[],this.search=i=>i.pipe(q(300),A(),O(n=>n.length<2?[]:this.tagTitles.filter(k=>k.toLowerCase().indexOf(n.toLowerCase())>-1).slice(0,10)))}ngOnInit(){this.parentForm.addControl("tag",this.formBuilder.control(this.transactionItem?.tag.title??"",[p.minLength(3),p.maxLength(32)]))}get tag(){return this.parentForm.get("tag")}get tagErrors(){return this.errors(this.tag)}get isInvalidTag(){return this.isInvalid(this.tag)}static{this.\u0275fac=function(i){return new(i||e)(d(N))}}static{this.\u0275cmp=c({type:e,selectors:[["transaction-tag-input"]],inputs:{transactionItem:"transactionItem",parentForm:"parentForm"},standalone:!0,features:[I([],[{provide:_,useExisting:b}]),h,y],decls:5,vars:7,consts:[[1,"form-floating","mb-3"],["type","text","placeholder","Title","id","form-tag","formControlName","tag",1,"form-control",3,"focusFirst","ngbTypeahead","ngClass"],["for","form-tag"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(i,n){i&1&&(s(0,"div",0),C(1,"input",1),s(2,"label",2),m(3,"Title"),o(),u(4,ct,2,1,"div",3),o()),i&2&&(a(),l("focusFirst",!0)("ngbTypeahead",n.search)("ngClass",v(4,pt,n.isInvalidTag,n.parentForm.valid)),a(3),l("ngIf",n.isInvalidTag))},dependencies:[x,F,T,V,D,E,S,it],encapsulation:2})}}return e})();var ut=(e,r)=>({"is-invalid":e,"is-valid":r});function ft(e,r){if(e&1&&(s(0,"div",5),m(1),o()),e&2){let t=f();a(),g(" ",t.validationErrors(t.dateErrors,"Date")," ")}}var lt=(()=>{class e extends M{constructor(t,i,n){super(),this.formBuilder=t,this.config=i,this.calendar=n,this.today=this.calendar.getToday(),i.maxDate=this.today,i.startDate=this.today,i.navigation="select",i.placement="top"}ngOnInit(){this.parentForm.addControl("date",this.formBuilder.control(this.today,[p.required,rt(this.today)]))}get date(){return this.parentForm.get("date")}get dateErrors(){return this.errors(this.date)}get isInvalidDate(){return this.isInvalid(this.date)}static{this.\u0275fac=function(i){return new(i||e)(d(N),d(tt),d(Z))}}static{this.\u0275cmp=c({type:e,selectors:[["transaction-date-input"]],inputs:{transactionItem:"transactionItem",parentForm:"parentForm"},standalone:!0,features:[I([],[{provide:_,useExisting:b}]),h,y],decls:6,vars:5,consts:[["d","ngbDatepicker"],[1,"form-floating","mb-3"],["id","form-date","placeholder","yyyy-mm-dd","formControlName","date","ngbDatepicker","",1,"form-control",3,"click","focus","ngClass"],["for","form-date"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(i,n){if(i&1){let k=U();s(0,"div",1)(1,"input",2,0),z("click",function(){$(k);let w=L(2);return B(w.toggle())})("focus",function(){$(k);let w=L(2);return B(w.toggle())}),o(),s(3,"label",3),m(4,"Date"),o(),u(5,ft,2,1,"div",4),o()}i&2&&(a(),l("ngClass",v(2,ut,n.isInvalidDate,n.parentForm.valid)),a(4),l("ngIf",n.isInvalidDate))},dependencies:[x,F,T,V,D,E,S,et],encapsulation:2})}}return e})();var gt=(e,r)=>r.id,mt=(e,r)=>({"is-invalid":e,"is-valid":r});function vt(e,r){if(e&1&&(s(0,"option",3),m(1),o()),e&2){let t=r.$implicit;l("ngValue",t),a(),H(t.title)}}function ht(e,r){if(e&1&&(s(0,"div",8),m(1),o()),e&2){let t=f();a(),g(" ",t.validationErrors(t.categoryErrors,"Category")," ")}}function Ct(e,r){if(e&1&&(s(0,"div",8),m(1),o()),e&2){let t=f();a(),g(" ",t.validationErrors(t.totalErrors,"Total")," ")}}var Gt=(()=>{class e extends M{constructor(t,i){super(),this.formBuilder=t,this.categoriesService=i,this.categoriesList=[]}ngOnInit(){this.addControlCategory(),this.parentForm.addControl("total",this.formBuilder.control(this.transactionItem?.total??"",[p.min(1),p.max(1e9)]))}addControlCategory(){this.categoriesService.list(new K({})).subscribe(t=>{this.categoriesList=t,this.parentForm.addControl("category",this.formBuilder.control(this.transactionItem?.category,[p.required,nt(this.categoriesList)]))})}get category(){return this.parentForm.get("category")}get total(){return this.parentForm.get("total")}get categoryErrors(){return this.errors(this.category)}get totalErrors(){return this.errors(this.total)}get isInvalidCategory(){return this.isInvalid(this.category)}get isInvalidTotal(){return this.isInvalid(this.total)}static{this.\u0275fac=function(i){return new(i||e)(d(N),d(J))}}static{this.\u0275cmp=c({type:e,selectors:[["transaction-inputs"]],inputs:{transactionItem:"transactionItem",parentForm:"parentForm"},standalone:!0,features:[I([],[{provide:_,useExisting:b}]),h,y],decls:16,vars:14,consts:[[3,"transactionItem","parentForm"],[1,"form-floating","mb-3"],["type","text","id","form-category","formControlName","category",1,"form-select",3,"ngClass"],[3,"ngValue"],["for","form-category"],["class","invalid-feedback",4,"ngIf"],["type","number","placeholder","Total","id","form-total","formControlName","total",1,"form-control",3,"ngClass"],["for","form-total"],[1,"invalid-feedback"]],template:function(i,n){i&1&&(C(0,"transaction-tag-input",0),s(1,"div",1)(2,"select",2)(3,"option"),m(4,"Select category"),o(),P(5,vt,2,2,"option",3,gt),o(),s(7,"label",4),m(8,"Category"),o(),u(9,ht,2,1,"div",5),o(),s(10,"div",1),C(11,"input",6),s(12,"label",7),m(13,"Total"),o(),u(14,Ct,2,1,"div",5),o(),C(15,"transaction-date-input",0)),i&2&&(l("transactionItem",n.transactionItem)("parentForm",n.parentForm),a(2),l("ngClass",v(8,mt,n.isInvalidCategory,n.parentForm.valid)),a(3),G(n.categoriesList),a(4),l("ngIf",n.isInvalidCategory),a(2),l("ngClass",v(11,mt,n.isInvalidTotal,n.parentForm.valid)),a(3),l("ngIf",n.isInvalidTotal),a(),l("transactionItem",n.transactionItem)("parentForm",n.parentForm))},dependencies:[x,F,T,V,X,Y,D,Q,W,E,S,st,lt],encapsulation:2})}}return e})();export{M as a,Gt as b};
