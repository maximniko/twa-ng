import{a as $,b as Y,c as Z,d as tt,e as et}from"./chunk-FXAJXUKS.js";import{c as D,e as d,f as b,g as E,k as J,l as _,m as S,n as K,o as Q,p as X,q as N,s as M}from"./chunk-7KBYL3R4.js";import{$ as p,Ab as z,Ba as G,Bb as H,Ca as f,Ia as W,K as c,Ka as m,La as U,Ma as g,P as O,Q as R,Qa as I,Ra as y,Ta as v,_ as n,eb as F,fb as T,ga as h,ha as u,hb as x,l as B,ma as l,sa as q,ta as A,u as L,ua as a,va as o,w as j,wa as C,za as P}from"./chunk-RJQUMXUA.js";var V=(()=>{class e{isInvalid(t){return t?.invalid&&(t?.dirty||t?.touched)}errors(t){return t?.errors}validationErrors(t,i){if(!t)return null;let r=[];return t?.required&&r.push(`${i} is required.`),t?.minlength&&r.push(`Minimum length of ${i} is ${t?.minlength.requiredLength}.`),t?.maxlength&&r.push(`Maximum length of ${i} is ${t?.maxlength.requiredLength}.`),t?.email&&r.push(`${i} must be an email address.`),t?.pattern&&r.push(`${i} is not valid.`),t?.invalidPhone&&r.push(`${i} is invalid phone.`),t?.invalidType&&r.push(`${i} is invalid type.`),r.join(`
`)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=c({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(i,r){},encapsulation:2})}}return e})();var mt=(e,s)=>({"is-invalid":e,"is-valid":s});function dt(e,s){if(e&1&&(a(0,"div",4),m(1),o()),e&2){let t=f();n(),g(" ",t.validationErrors(t.tagErrors,"Title")," ")}}var nt=(()=>{class e extends V{constructor(t){super(),this.formBuilder=t,this.tagTitles=[],this.search=i=>i.pipe(L(300),j(),B(r=>r.length<2?[]:this.tagTitles.filter(k=>k.toLowerCase().indexOf(r.toLowerCase())>-1).slice(0,10)))}ngOnInit(){this.parentForm.addControl("tag",this.formBuilder.control(this.transactionItem?.tag.title??"",[d.minLength(3),d.maxLength(32)]))}get tag(){return this.parentForm.get("tag")}get tagErrors(){return this.errors(this.tag)}get isInvalidTag(){return this.isInvalid(this.tag)}static{this.\u0275fac=function(i){return new(i||e)(p(N))}}static{this.\u0275cmp=c({type:e,selectors:[["transaction-tag-input"]],inputs:{transactionItem:"transactionItem",parentForm:"parentForm"},standalone:!0,features:[I([],[{provide:b,useExisting:_}]),h,y],decls:5,vars:7,consts:[[1,"form-floating","mb-3"],["type","text","placeholder","Title","id","form-tag","formControlName","tag",1,"form-control",3,"focusFirst","ngbTypeahead","ngClass"],["for","form-tag"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(i,r){i&1&&(a(0,"div",0),C(1,"input",1),a(2,"label",2),m(3,"Title"),o(),u(4,dt,2,1,"div",3),o()),i&2&&(n(),l("focusFirst",!0)("ngbTypeahead",r.search)("ngClass",v(4,mt,r.isInvalidTag,r.parentForm.valid)),n(3),l("ngIf",r.isInvalidTag))},dependencies:[x,F,T,M,D,E,S,et],encapsulation:2})}}return e})();function ot(e){return s=>{let t=s.value;if(t&&typeof t=="string"){let r=t.match(/^([10]\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/);if(r){if(r&&r[0]!==t)return{invalidType:!0}}else return{invalidType:!0}}let i=$.from(t);return i instanceof $&&(i.after(e),i.after(e))?{invalidType:!0}:null}}var pt=(e,s)=>({"is-invalid":e,"is-valid":s});function ct(e,s){if(e&1&&(a(0,"div",5),m(1),o()),e&2){let t=f();n(),g(" ",t.validationErrors(t.dateErrors,"Date")," ")}}var at=(()=>{class e extends V{constructor(t,i,r){super(),this.formBuilder=t,this.config=i,this.calendar=r,this.today=this.calendar.getToday(),i.maxDate=this.today,i.startDate=this.today,i.navigation="select",i.placement="top"}ngOnInit(){this.parentForm.addControl("date",this.formBuilder.control(this.today,[d.required,ot(this.today)]))}get date(){return this.parentForm.get("date")}get dateErrors(){return this.errors(this.date)}get isInvalidDate(){return this.isInvalid(this.date)}static{this.\u0275fac=function(i){return new(i||e)(p(N),p(Z),p(Y))}}static{this.\u0275cmp=c({type:e,selectors:[["transaction-date-input"]],inputs:{transactionItem:"transactionItem",parentForm:"parentForm"},standalone:!0,features:[I([],[{provide:b,useExisting:_}]),h,y],decls:6,vars:5,consts:[["d","ngbDatepicker"],[1,"form-floating","mb-3"],["id","form-date","placeholder","yyyy-mm-dd","formControlName","date","ngbDatepicker","",1,"form-control",3,"click","ngClass"],["for","form-date"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(i,r){if(i&1){let k=P();a(0,"div",1)(1,"input",2,0),G("click",function(){O(k);let lt=W(2);return R(lt.toggle())}),o(),a(3,"label",3),m(4,"Date"),o(),u(5,ct,2,1,"div",4),o()}i&2&&(n(),l("ngClass",v(2,pt,r.isInvalidDate,r.parentForm.valid)),n(4),l("ngIf",r.isInvalidDate))},dependencies:[x,F,T,M,D,E,S,tt],encapsulation:2})}}return e})();var ut=(e,s)=>s.id,st=(e,s)=>({"is-invalid":e,"is-valid":s});function ft(e,s){if(e&1&&(a(0,"option",2),m(1),o()),e&2){let t=s.$implicit;l("ngValue",t),n(),U(t.title)}}function gt(e,s){if(e&1&&(a(0,"div",8),m(1),o()),e&2){let t=f();n(),g(" ",t.validationErrors(t.categoryErrors,"Category")," ")}}function vt(e,s){if(e&1&&(a(0,"div",8),m(1),o()),e&2){let t=f();n(),g(" ",t.validationErrors(t.totalErrors,"Total")," ")}}var At=(()=>{class e extends V{constructor(t,i){super(),this.formBuilder=t,this.categoriesService=i,this.categoriesList=[]}ngOnInit(){this.addControlCategory(),this.parentForm.addControl("total",this.formBuilder.control(this.transactionItem?.total??"",[d.required,d.min(1),d.max(1e9)]))}ngOnDestroy(){this.serviceSubscription?.unsubscribe()}compareCategory(t,i){return t&&i?t.id==i.id:!1}addControlCategory(){this.serviceSubscription=this.categoriesService.list(new H({})).subscribe(t=>{this.categoriesList=t}),this.parentForm.addControl("category",this.formBuilder.control(this.transactionItem?.category??this.categoryItem,[d.required]))}get category(){return this.parentForm.get("category")}get total(){return this.parentForm.get("total")}get categoryErrors(){return this.errors(this.category)}get totalErrors(){return this.errors(this.total)}get isInvalidCategory(){return this.isInvalid(this.category)}get isInvalidTotal(){return this.isInvalid(this.total)}static{this.\u0275fac=function(i){return new(i||e)(p(N),p(z))}}static{this.\u0275cmp=c({type:e,selectors:[["transaction-inputs"]],inputs:{transactionItem:"transactionItem",categoryItem:"categoryItem",parentForm:"parentForm"},standalone:!0,features:[I([],[{provide:b,useExisting:_}]),h,y],decls:14,vars:15,consts:[[1,"form-floating","mb-3"],["type","text","id","form-category","formControlName","category",1,"form-select",3,"ngClass","compareWith"],[3,"ngValue"],["for","form-category"],["class","invalid-feedback",4,"ngIf"],[3,"transactionItem","parentForm"],["type","number","placeholder","Total","id","form-total","formControlName","total",1,"form-control",3,"ngClass"],["for","form-total"],[1,"invalid-feedback"]],template:function(i,r){i&1&&(a(0,"div",0)(1,"select",1),q(2,ft,2,2,"option",2,ut),o(),a(4,"label",3),m(5,"Category"),o(),u(6,gt,2,1,"div",4),o(),C(7,"transaction-tag-input",5),a(8,"div",0),C(9,"input",6),a(10,"label",7),m(11,"Total"),o(),u(12,vt,2,1,"div",4),o(),C(13,"transaction-date-input",5)),i&2&&(n(),l("ngClass",v(9,st,r.isInvalidCategory,r.parentForm.valid))("compareWith",r.compareCategory),n(),A(r.categoriesList),n(4),l("ngIf",r.isInvalidCategory),n(),l("transactionItem",r.transactionItem)("parentForm",r.parentForm),n(2),l("ngClass",v(12,st,r.isInvalidTotal,r.parentForm.valid)),n(3),l("ngIf",r.isInvalidTotal),n(),l("transactionItem",r.transactionItem)("parentForm",r.parentForm))},dependencies:[x,F,T,M,Q,X,D,J,K,E,S,nt,at],encapsulation:2})}}return e})();export{V as a,At as b};
