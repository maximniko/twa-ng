import{c as T,d as O}from"./chunk-WY7JL6PL.js";import{a as j}from"./chunk-FWXH3OGA.js";import{a as y}from"./chunk-PR4HGBXA.js";import{G as p,La as h,M as g,Ma as M,N as _,U as s,V as k,Ya as w,aa as C,cb as x,da as f,ea as l,ha as v,ia as E,ja as I,ka as o,la as a,ma as m,pa as d,ua as L,va as c,wa as b,xa as D,za as u}from"./chunk-WUKHUTVC.js";var F=(()=>{class t{constructor(){this.chartCategories=[],this.doughnutChartLabels=[],this.doughnutChartDatasets=[],this.doughnutChartOptions={animation:{animateRotate:!0,animateScale:!0},responsive:!0}}ngOnInit(){this.initChartData()}initChartData(){let e=this.chartCategories.reduce((i,r)=>(i.labels.push(r.category.title),i.backgroundColors.push(r.category.color),i.data.push(r.total),i),{labels:[],backgroundColors:[],data:[]});this.doughnutChartLabels.push(...e.labels),this.doughnutChartDatasets.push({data:e.data,label:"sum",borderWidth:1,backgroundColor:e.backgroundColors})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=p({type:t,selectors:[["chart-categories-doughnut"]],inputs:{chartCategories:"chartCategories"},standalone:!0,features:[u],decls:1,vars:5,consts:[["baseChart","",3,"labels","datasets","options","legend","type"]],template:function(i,r){i&1&&m(0,"canvas",0),i&2&&l("labels",r.doughnutChartLabels)("datasets",r.doughnutChartDatasets)("options",r.doughnutChartOptions)("legend",!0)("type","doughnut")},dependencies:[h,T],encapsulation:2})}}return t})();var P=(t,n)=>n.category.id;function G(t,n){if(t&1&&(o(0,"a",1)(1,"div",2)(2,"div",3),c(3),a()(),o(4,"div",4)(5,"div",5)(6,"div"),c(7),a()(),o(8,"div",6)(9,"div"),c(10,"Sum:"),a(),o(11,"div"),c(12),a()()(),o(13,"div",7),g(),o(14,"svg",8),m(15,"use"),a()()()),t&2){let e=n.$implicit,i=d(2);l("routerLink",i.routeCreator.chartCategory(e.category)),s(),L("width:4rem;height:4rem;background-color:",e.category.color,";"),s(2),b(e.category.label),s(4),b(e.category.title),s(5),b(e.total),s(3),f("href","#"+i.symbols.chevronRight,null,"xlink")}}function H(t,n){if(t&1&&(o(0,"div",0),E(1,G,16,8,"a",1,P),a()),t&2){let e=d();s(),I(e.chartCategories)}}var A=(()=>{class t{constructor(){this.chartCategories=[],this.routeCreator=x,this.symbols=y}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=p({type:t,selectors:[["chart-categories-list"]],inputs:{chartCategories:"chartCategories"},standalone:!0,features:[u],decls:1,vars:1,consts:[[1,"list-group"],[1,"list-group-item","list-group-item-action","hstack","pe-0",3,"routerLink"],[1,"rounded-circle","d-flex"],[1,"m-auto"],[1,"vstack","ps-3","jcc"],[1,"jcs"],[1,"jcb"],[1,"jcc","px-3"],[1,"bi"]],template:function(i,r){i&1&&C(0,H,3,0,"div",0),i&2&&v(r.chartCategories.length?0:-1)},dependencies:[h,w],encapsulation:2})}}return t})();function B(t){return Object.keys(t).length==0}var S=class{constructor(n){this.params=n}toHttpParams(){let n={};return this.params.categoryId&&(n.categoryId=this.params.categoryId),this.params.from&&(n.from=this.params.from.toISOString()),this.params.to&&(n.to=this.params.to.toISOString()),new M({fromObject:n})}filter(n){return this.params.categoryId?n.category.id==this.params.categoryId:B(this.params)}};function W(t,n){if(t&1&&c(0),t&2){let e=d();D(" ",e.chartCategories.length," ")}}function $(t,n){if(t&1&&(o(0,"div",15),m(1,"chart-categories-doughnut",16),a(),o(2,"div",15),m(3,"chart-categories-list",16),a()),t&2){let e=d();s(),l("chartCategories",e.chartCategories),s(2),l("chartCategories",e.chartCategories)}}var lt=(()=>{class t{constructor(e,i){this.twa=e,this.service=i,this.chartCategories=[],this.routeCreator=x,this.symbols=y,this.service.list(new S({})).subscribe(r=>this.chartCategories=r)}ngOnInit(){this.initChartCategories(),this.twa.visibleBackButton(!1),this.twa.setMainButton({text:"Add transaction",is_active:!0,is_visible:!0,has_shine_effect:!0},()=>{})}initChartCategories(){}static{this.\u0275fac=function(i){return new(i||t)(k(j),k(O))}}static{this.\u0275cmp=p({type:t,selectors:[["ng-component"]],hostAttrs:[1,"d-flex","flex-column","h-100"],standalone:!0,features:[u],decls:29,vars:3,consts:[[1,"accent-border","accent-border-top","accent-bg-shadow","card","rounded-5"],[1,"hstack","p-3","pb-0"],[1,"m-auto","text-center","h5"],[1,"form-floating","ms-auto"],["id","period","aria-label","Select period",1,"form-select","rounded-4"],["value","1","selected",""],["value","2"],["value","3"],["for","period"],["aria-label","Page navigation",1,"sticky-bottom","p-2","bg-blur"],[1,"pagination","pagination-lg","jcb","m-0","w-100"],[1,"page-item"],["href","#",1,"page-link","color-accent"],[1,"bi"],[1,"w-100","text-center"],[1,"card-body","p-2"],[3,"chartCategories"]],template:function(i,r){i&1&&(o(0,"section",0)(1,"div",1)(2,"span",2),c(3,"Transactions"),a(),o(4,"div",3)(5,"select",4)(6,"option",5),c(7,"Day"),a(),o(8,"option",6),c(9,"Week"),a(),o(10,"option",7),c(11,"Month"),a()(),o(12,"label",8),c(13,"Period"),a()()(),C(14,W,1,1)(15,$,4,2),o(16,"nav",9)(17,"ul",10)(18,"li",11)(19,"a",12),g(),o(20,"svg",13),m(21,"use"),a()()(),_(),o(22,"li",14)(23,"a",12),c(24,"Current"),a()(),o(25,"li",11)(26,"a",12),g(),o(27,"svg",13),m(28,"use"),a()()()()()()),i&2&&(s(14),v(r.chartCategories.length?15:14),s(7),f("href","#"+r.symbols.chevronLeft,null,"xlink"),s(7),f("href","#"+r.symbols.chevronRight,null,"xlink"))},dependencies:[h,F,A],encapsulation:2})}}return t})();export{lt as MainComponent};
