import{a as H,b as $}from"./chunk-6TDCY6LJ.js";import{a as R}from"./chunk-SU6XQPXQ.js";import{c as O}from"./chunk-S2DLXYK6.js";import{a as A,b as P}from"./chunk-5FEUUNCK.js";import"./chunk-CTBJ2Y2T.js";import{a as j}from"./chunk-UFVXHCOO.js";import{a as F}from"./chunk-UBJEU3DX.js";import{Bb as L,Cb as T,Ea as g,Kb as I,M as d,Mb as v,Na as w,Oa as s,Pa as h,T as E,Va as f,aa as u,ba as p,ja as x,na as D,nb as C,oa as m,ob as B,ra as b,ua as M,v as _,va as k,wa as a,xa as n,ya as c}from"./chunk-T77L2YF3.js";var G=(()=>{class e{constructor(){this.chartCategories=[],this.doughnutChartLabels=[],this.doughnutChartDatasets=[],this.doughnutChartOptions={animation:{animateRotate:!0,animateScale:!0},plugins:{legend:{position:"bottom",labels:{font:{size:16}}}},responsive:!0}}ngOnInit(){this.initChartData()}initChartData(){let t=this.chartCategories.reduce((o,l,S)=>(S<5?(o.labels.push(l.category.title),o.backgroundColors.push(l.color),o.data.push(l.total)):(o.labels[5]="Others",o.backgroundColors.push("#999"),o.data[5]=(o.data[5]??0)+l.total),o),{labels:[],backgroundColors:[],data:[]});this.doughnutChartLabels.push(...t.labels),this.doughnutChartDatasets.push({data:t.data,label:"sum",borderWidth:1,backgroundColor:t.backgroundColors})}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=d({type:e,selectors:[["chart-categories-doughnut"]],inputs:{chartCategories:"chartCategories"},standalone:!0,features:[f],decls:1,vars:5,consts:[["baseChart","",3,"labels","datasets","options","legend","type"]],template:function(t,o){t&1&&c(0,"canvas",0),t&2&&m("labels",o.doughnutChartLabels)("datasets",o.doughnutChartDatasets)("options",o.doughnutChartOptions)("legend",!0)("type","doughnut")},dependencies:[C,O],encapsulation:2})}}return e})();var W=(e,r)=>r.category.id;function q(e,r){if(e&1&&(a(0,"a",1)(1,"div",2)(2,"div",3),s(3),n()(),a(4,"div",4)(5,"div",5)(6,"div",6),s(7),n()(),a(8,"div",7)(9,"div"),s(10,"Sum:"),n(),a(11,"div"),s(12),n()()(),a(13,"div",8),E(),a(14,"svg",9),c(15,"use"),n()()()),e&2){let i=r.$implicit,t=g(2);m("routerLink",t.routeCreator.chartCategory(i.category)),u(),w("width:4rem;height:4rem;background-color:",i.color,";"),u(2),h(i.category.label),u(4),h(i.category.title),u(5),h(i.total),u(3),D("href","#"+t.symbols.chevronRight,null,"xlink")}}function J(e,r){if(e&1&&(a(0,"div",0),M(1,q,16,8,"a",1,W),n()),e&2){let i=g();u(),k(i.chartCategories)}}var V=(()=>{class e{constructor(){this.chartCategories=[],this.routeCreator=v,this.symbols=j}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=d({type:e,selectors:[["chart-categories-list"]],inputs:{chartCategories:"chartCategories"},standalone:!0,features:[f],decls:1,vars:1,consts:[[1,"list-group"],[1,"list-group-item","hstack","pe-0",3,"routerLink"],[1,"rounded-circle","d-flex"],[1,"m-auto"],[1,"vstack","ps-3","jcc"],[1,"jcs"],[1,"text-truncate"],[1,"jcb"],[1,"jcc","px-3"],[1,"bi"]],template:function(t,o){t&1&&x(0,J,3,0,"div",0),t&2&&b(o.chartCategories.length?0:-1)},dependencies:[C,T],encapsulation:2})}}return e})();var y=class{constructor(r){this.params=r}toHttpParams(){let r={};return this.params.categoryId&&(r.categoryId=this.params.categoryId),this.params.from&&(r.from=I(this.params.from)),this.params.to&&(r.to=I(this.params.to)),new B({fromObject:r})}filter(r){return this.params.categoryId?r.category.id==this.params.categoryId:this.params.categoryId==null}};function K(e,r){if(e&1&&(a(0,"section",0)(1,"div",2)(2,"span",3),s(3),n(),c(4,"period-selector"),n(),a(5,"div",4),c(6,"chart-categories-doughnut",5),n(),a(7,"div",4),c(8,"chart-categories-list",5),n(),c(9,"period-pagination"),n()),e&2){let i,t=g();u(3),h((i=t.localisation.t.mainCalculations)!==null&&i!==void 0?i:"Calculations"),u(3),m("chartCategories",t.chartCategories),u(2),m("chartCategories",t.chartCategories)}}function N(e,r){e&1&&(a(0,"div",1)(1,"div",6)(2,"h5"),s(3,"\u0421\u043B\u0435\u0434\u0438 \u0437\u0430 \u0441\u0432\u043E\u0438\u043C\u0438 \u0444\u0438\u043D\u0430\u043D\u0441\u0430\u043C\u0438 "),a(4,"span",7),s(5,"\u043B\u0435\u0433\u043A\u043E"),n()(),a(6,"p")(7,"span",7),s(8,"\u0423\u043F\u0440\u0430\u0432\u043B\u044F\u0439"),n(),s(9," \u0431\u044E\u0434\u0436\u0435\u0442\u043E\u043C, \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0439 \u0440\u0430\u0441\u0445\u043E\u0434\u044B "),a(10,"span",7),s(11,"\u0438 \u0434\u043E\u0441\u0442\u0438\u0433\u0430\u0439"),n(),s(12," \u0444\u0438\u043D\u0430\u043D\u0441\u043E\u0432\u044B\u0445 "),a(13,"span",7),s(14,"\u0446\u0435\u043B\u0435\u0439"),n(),s(15,"."),n()()())}var xt=(()=>{class e{constructor(i,t,o,l,S){this.twa=i,this.filter=t,this.localisation=o,this.service=l,this.router=S,this.chartCategories=[],this.routeCreator=v}ngOnInit(){this.loadChartCategories(this.filter.fromTo),this.filterSubscription=this.filter.nextFromTo.pipe(_(1e3)).subscribe(i=>this.loadChartCategories(i)),this.twa.visibleBackButton(!1),this.twa.setMainButton({text:"Add transaction",is_active:!0,is_visible:!0,has_shine_effect:!0},()=>this.onMainClick())}ngOnDestroy(){this.twa.offMainButton(()=>this.onMainClick()),this.filterSubscription?.unsubscribe()}onMainClick(){this.router.navigate([v.transactionAdd()])}loadChartCategories(i){this.service.list(new y(i)).subscribe(t=>this.chartCategories=t)}static{this.\u0275fac=function(t){return new(t||e)(p(F),p(A),p(H),p($),p(L))}}static{this.\u0275cmp=d({type:e,selectors:[["ng-component"]],hostAttrs:[1,"d-flex","flex-column","h-100"],standalone:!0,features:[f],decls:2,vars:1,consts:[[1,"accent-border","accent-border-top","accent-bg-shadow","card","rounded-5"],[1,"m-auto"],[1,"hstack","p-3","pb-0"],[1,"m-auto","text-center","h5"],[1,"card-body","p-2"],[3,"chartCategories"],[1,"m-3","mb-5","text-center"],[1,"h1","color-accent"]],template:function(t,o){t&1&&x(0,K,10,3,"section",0)(1,N,16,0,"div",1),t&2&&b((o.chartCategories.length,1))},dependencies:[C,G,V,P,R],encapsulation:2})}}return e})();export{xt as MainComponent};
