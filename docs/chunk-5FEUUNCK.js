import{n as m}from"./chunk-CTBJ2Y2T.js";import{g as b,i as T,n as v,o as D,p as x,r as C}from"./chunk-UFVXHCOO.js";import{H as g,M as u,Oa as l,Ra as f,Sa as _,Ta as y,Va as P,aa as r,ba as h,g as c,nb as S,oa as d,wa as i,xa as n}from"./chunk-T77L2YF3.js";var w=(()=>{class a{constructor(){this.nextFromTo=new c,this.page=0,this.maxPage=12,this._period=s.day,this.format={day:"numeric",month:"short"}}get period(){return this._period}resetPage(){this.page=0,this.nextFromTo.next(this.fromTo)}set period(e){e!=this._period&&(this._period=e,this.resetPage())}pageNext(){this.page<this.maxPage&&(this.page+=1,this.nextFromTo.next(this.fromTo))}pagePrev(){this.page>0&&(this.page-=1,this.nextFromTo.next(this.fromTo))}get fromTo(){let e=new Date,t=new Date;switch(this.period){case s.day:e.setDate(e.getDate()-this.page-1),t.setDate(t.getDate()-this.page);break;case s.week:e.setDate(e.getDate()-this.page*7-7),t.setDate(t.getDate()-this.page*7);break;case s.month:e.setMonth(e.getMonth()-this.page-1),t.setMonth(t.getMonth()-this.page);break}return{from:e,to:t}}getPeriodString(){let e=this.fromTo;return this.page===0||this.period==s.day?this.label(e.to):`${this.label(e.from)} - ${this.label(e.to)}`}label(e){if(this.page>0){if(this.period===s.day){let t=m(this.format);return t.weekday="short",e.toLocaleDateString("ru-RU",t)}return e.toLocaleDateString("ru-RU",this.format)}switch(this.period){case s.day:return"Today";case s.week:return"This week";case s.month:return"This month"}}isLastPage(){return this.page>=this.maxPage}isFirstPage(){return this.page<1}static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275prov=g({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),s=function(a){return a.day="day",a.week="week",a.month="month",a}(s||{});var $t=(()=>{class a{constructor(e){this.filter=e,this.Period=s}setPeriod(e){console.log(e),this.filter.period=e}isSelected(e){return this.filter.period==e}static{this.\u0275fac=function(t){return new(t||a)(h(w))}}static{this.\u0275cmp=u({type:a,selectors:[["period-selector"]],standalone:!0,features:[P],decls:10,vars:4,consts:[[1,"form-floating","ms-auto"],["id","period","aria-label","Select period",1,"form-select","rounded-4",3,"ngModelChange","ngModel"],[3,"ngValue"],["for","period"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"select",1),y("ngModelChange",function(p){return _(o.filter.period,p)||(o.filter.period=p),p}),i(2,"option",2),l(3,"Day"),n(),i(4,"option",2),l(5,"Week"),n(),i(6,"option",2),l(7,"Month"),n()(),i(8,"label",3),l(9,"Period"),n()()),t&2&&(r(),f("ngModel",o.filter.period),r(),d("ngValue",o.Period.day),r(2),d("ngValue",o.Period.week),r(2),d("ngValue",o.Period.month))},dependencies:[S,C,D,x,v,b,T],encapsulation:2})}}return a})();export{w as a,$t as b};
