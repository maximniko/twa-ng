import{a as L,b as tt,c as et,d as it,e as nt}from"./chunk-DYYHT6XW.js";import{a as O}from"./chunk-JY552KI6.js";import{c as S,e as c,f as N,g as V,k as Q,l as k,m as M,n as X,o as Y,p as Z,q as B,s as w}from"./chunk-DHROBJAE.js";import{Ba as U,Da as z,Ea as v,Ha as _,M as C,Ma as H,Nb as J,Oa as p,Ob as K,Pa as f,Qa as I,R as G,S as P,Va as T,Wa as D,Ya as h,aa as r,ba as u,ia as y,ja as g,l as R,oa as m,pb as b,qb as x,ua as W,ub as E,v as A,va as $,wa as a,x as q,xa as o,ya as F}from"./chunk-7ZW7U2TK.js";var pt=(i,l)=>({"is-invalid":i,"is-valid":l});function ct(i,l){if(i&1&&(a(0,"div",4),p(1),o()),i&2){let e,t=v();r(),I(" ",t.validationErrors(t.tagErrors,(e=t.localisation.t.Title)!==null&&e!==void 0?e:"Title")," ")}}var lt=(()=>{class i extends O{constructor(e){super(),this.formBuilder=e,this.tagTitles=[],this.search=t=>t.pipe(A(300),q(),R(n=>n.length<2?[]:this.tagTitles.filter(s=>s.toLowerCase().indexOf(n.toLowerCase())>-1).slice(0,10)))}ngOnInit(){this.parentForm.addControl("tag",this.formBuilder.control(this.transactionItem?.tag.title??"",[c.minLength(3),c.maxLength(32)]))}get tag(){return this.parentForm.get("tag")}get tagErrors(){return this.errors(this.tag)}get isInvalidTag(){return this.isInvalid(this.tag)}static{this.\u0275fac=function(t){return new(t||i)(u(B))}}static{this.\u0275cmp=C({type:i,selectors:[["transaction-tag-input"]],inputs:{transactionItem:"transactionItem",parentForm:"parentForm"},standalone:!0,features:[T([],[{provide:N,useExisting:k}]),y,D],decls:5,vars:9,consts:[[1,"form-floating","mb-3"],["type","text","id","form-tag","formControlName","tag",1,"form-control",3,"placeholder","focusFirst","ngbTypeahead","ngClass"],["for","form-tag"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(t,n){if(t&1&&(a(0,"div",0),F(1,"input",1),a(2,"label",2),p(3),o(),g(4,ct,2,1,"div",3),o()),t&2){let s,d;r(),_("placeholder",(s=n.localisation.t.Title)!==null&&s!==void 0?s:"Title"),m("focusFirst",!0)("ngbTypeahead",n.search)("ngClass",h(6,pt,n.isInvalidTag,n.parentForm.valid)),r(2),f((d=n.localisation.t.Title)!==null&&d!==void 0?d:"Title"),r(),m("ngIf",n.isInvalidTag)}},dependencies:[E,b,x,w,S,V,M,nt],encapsulation:2})}}return i})();function st(i){return l=>{let e=l.value;if(e&&typeof e=="string"){let n=e.match(/^([10]\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/);if(n){if(n&&n[0]!==e)return{invalidType:!0}}else return{invalidType:!0}}let t=L.from(e);return t instanceof L&&(t.after(i),t.after(i))?{invalidType:!0}:null}}var ut=(i,l)=>({"is-invalid":i,"is-valid":l});function ft(i,l){if(i&1&&(a(0,"div",5),p(1),o()),i&2){let e,t=v();r(),I(" ",t.validationErrors(t.dateErrors,(e=t.localisation.t.Date)!==null&&e!==void 0?e:"Date")," ")}}var mt=(()=>{class i extends O{constructor(e,t,n){super(),this.formBuilder=e,this.config=t,this.calendar=n,this.today=this.calendar.getToday(),t.maxDate=this.today,t.startDate=this.today,t.navigation="select",t.placement="top"}ngOnInit(){this.parentForm.addControl("date",this.formBuilder.control(this.today,[c.required,st(this.today)]))}get date(){return this.parentForm.get("date")}get dateErrors(){return this.errors(this.date)}get isInvalidDate(){return this.isInvalid(this.date)}static{this.\u0275fac=function(t){return new(t||i)(u(B),u(et),u(tt))}}static{this.\u0275cmp=C({type:i,selectors:[["transaction-date-input"]],inputs:{transactionItem:"transactionItem",parentForm:"parentForm"},standalone:!0,features:[T([],[{provide:N,useExisting:k}]),y,D],decls:6,vars:7,consts:[["d","ngbDatepicker"],[1,"form-floating","mb-3"],["id","form-date","formControlName","date","ngbDatepicker","",1,"form-control",3,"click","placeholder","ngClass"],["for","form-date"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(t,n){if(t&1){let s=U();a(0,"div",1)(1,"input",2,0),z("click",function(){G(s);let j=H(2);return P(j.toggle())}),o(),a(3,"label",3),p(4),o(),g(5,ft,2,1,"div",4),o()}if(t&2){let s,d;r(),_("placeholder",(s=n.localisation.t.Date)!==null&&s!==void 0?s:"Date"),m("ngClass",h(4,ut,n.isInvalidDate,n.parentForm.valid)),r(3),f((d=n.localisation.t.Date)!==null&&d!==void 0?d:"Date"),r(),m("ngIf",n.isInvalidDate)}},dependencies:[E,b,x,w,S,V,M,it],encapsulation:2})}}return i})();var gt=(i,l)=>l.id,dt=(i,l)=>({"is-invalid":i,"is-valid":l});function vt(i,l){if(i&1&&(a(0,"option",2),p(1),o()),i&2){let e=l.$implicit;m("ngValue",e),r(),f(e.title)}}function It(i,l){if(i&1&&(a(0,"div",8),p(1),o()),i&2){let e,t=v();r(),I(" ",t.validationErrors(t.categoryErrors,(e=t.localisation.t.Category)!==null&&e!==void 0?e:"Category")," ")}}function ht(i,l){if(i&1&&(a(0,"div",8),p(1),o()),i&2){let e,t=v();r(),I(" ",t.validationErrors(t.totalErrors,(e=t.localisation.t.Total)!==null&&e!==void 0?e:"Total")," ")}}var Gt=(()=>{class i extends O{constructor(e,t){super(),this.formBuilder=e,this.categoriesService=t,this.categoriesList=[]}ngOnInit(){this.addControlCategory(),this.parentForm.addControl("total",this.formBuilder.control(this.transactionItem?.total??"",[c.required,c.min(1),c.max(1e9)]))}ngOnDestroy(){this.serviceSubscription?.unsubscribe()}compareCategory(e,t){return e&&t?e.id==t.id:!1}addControlCategory(){this.serviceSubscription=this.categoriesService.list(new K({})).subscribe(e=>{this.categoriesList=e}),this.parentForm.addControl("category",this.formBuilder.control(this.transactionItem?.category??this.categoryItem,[c.required]))}get category(){return this.parentForm.get("category")}get total(){return this.parentForm.get("total")}get categoryErrors(){return this.errors(this.category)}get totalErrors(){return this.errors(this.total)}get isInvalidCategory(){return this.isInvalid(this.category)}get isInvalidTotal(){return this.isInvalid(this.total)}static{this.\u0275fac=function(t){return new(t||i)(u(B),u(J))}}static{this.\u0275cmp=C({type:i,selectors:[["transaction-inputs"]],inputs:{transactionItem:"transactionItem",categoryItem:"categoryItem",parentForm:"parentForm"},standalone:!0,features:[T([],[{provide:N,useExisting:k}]),y,D],decls:14,vars:18,consts:[[1,"form-floating","mb-3"],["type","text","id","form-category","formControlName","category",1,"form-select",3,"ngClass","compareWith"],[3,"ngValue"],["for","form-category"],["class","invalid-feedback",4,"ngIf"],[3,"transactionItem","parentForm"],["type","number","id","form-total","formControlName","total",1,"form-control",3,"placeholder","ngClass"],["for","form-total"],[1,"invalid-feedback"]],template:function(t,n){if(t&1&&(a(0,"div",0)(1,"select",1),W(2,vt,2,2,"option",2,gt),o(),a(4,"label",3),p(5),o(),g(6,It,2,1,"div",4),o(),F(7,"transaction-tag-input",5),a(8,"div",0),F(9,"input",6),a(10,"label",7),p(11),o(),g(12,ht,2,1,"div",4),o(),F(13,"transaction-date-input",5)),t&2){let s,d,j;r(),m("ngClass",h(12,dt,n.isInvalidCategory,n.parentForm.valid))("compareWith",n.compareCategory),r(),$(n.categoriesList),r(3),f((s=n.localisation.t.Category)!==null&&s!==void 0?s:"Category"),r(),m("ngIf",n.isInvalidCategory),r(),m("transactionItem",n.transactionItem)("parentForm",n.parentForm),r(2),_("placeholder",(d=n.localisation.t.Total)!==null&&d!==void 0?d:"Total"),m("ngClass",h(15,dt,n.isInvalidTotal,n.parentForm.valid)),r(2),f((j=n.localisation.t.Total)!==null&&j!==void 0?j:"Total"),r(),m("ngIf",n.isInvalidTotal),r(),m("transactionItem",n.transactionItem)("parentForm",n.parentForm)}},dependencies:[E,b,x,w,Y,Z,S,Q,X,V,M,lt,mt],encapsulation:2})}}return i})();export{Gt as a};
