import"./chunk-6Z3VV77E.js";import{b as T}from"./chunk-V6ZMKAML.js";import{e as y,f as C,h as F,m as w,n as E}from"./chunk-TQR2ECCA.js";import{a as k}from"./chunk-6HWPIXC6.js";import{a as M}from"./chunk-DGEO6YFW.js";import{Da as f,Db as I,Gb as j,M as u,Oa as v,Sa as b,T as l,U as h,aa as a,ba as o,ib as g,lb as B,na as p,oa as c,ub as S,wa as r,wb as _,xa as s,ya as m}from"./chunk-3IIJ4CMG.js";var K=(()=>{class n{constructor(t,i,e,d,D){this.activatedRoute=t,this.twa=i,this.router=e,this.formBuilder=d,this.service=D,this.transactionForm=this.formBuilder.group({}),this.symbols=k,this.delete=this.delete.bind(this),this.save=this.save.bind(this),this.goBack=this.goBack.bind(this)}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.transactionItem=t.transactionItem,this.twa.backButtonOnClick(this.goBack)}),this.twa.setSecondaryButton({text:"Delete",is_visible:!0,is_active:!0,has_shine_effect:!1,position:"left"},this.delete),this.twa.setMainButton({text:"Save",is_visible:!0,is_active:!0,has_shine_effect:!0},this.save)}ngOnDestroy(){this.twa.offBackButton(this.goBack,!1),this.twa.offMainButton(this.save),this.twa.offSecondaryButton(this.delete,!1)}save(){if(this.transactionForm.invalid)return;let t=this.transactionForm.value;t.id=this.transactionItem.id,this.service.edit(t).subscribe(()=>this.router.navigateByUrl(this._backUrl))}delete(){this.service.delete(this.transactionItem).subscribe(t=>{t.status==B.NoContent&&this.goBack()})}goBack(){this.router.navigate([this._backUrl])}get _backUrl(){return j.chartCategory(this.transactionItem.category)}static{this.\u0275fac=function(i){return new(i||n)(o(S),o(M),o(_),o(w),o(I))}}static{this.\u0275cmp=u({type:n,selectors:[["ng-component"]],standalone:!0,features:[b],decls:9,vars:4,consts:[[1,"accent-border","accent-border-top","accent-bg-shadow","card","rounded-5"],[1,"hstack","p-3","pb-0","color-accent"],[1,"m-auto","text-center","h5"],[1,"p-3"],["width","2rem","height","2rem",1,"bi"],[1,"p-3",3,"ngSubmit","formGroup"],[3,"parentForm","transactionItem"]],template:function(i,e){i&1&&(r(0,"section",0)(1,"div",1)(2,"span",2),v(3,"Edit"),s(),r(4,"div",3),l(),r(5,"svg",4),m(6,"use"),s()()(),h(),r(7,"form",5),f("ngSubmit",function(){return e.save()}),m(8,"transaction-inputs",6),s()()),i&2&&(a(6),p("href","#"+e.symbols.gearFill,null,"xlink"),a(),c("formGroup",e.transactionForm),a(),c("parentForm",e.transactionForm)("transactionItem",e.transactionItem))},dependencies:[g,E,C,y,F,T],encapsulation:2})}}return n})();export{K as EditComponent};
