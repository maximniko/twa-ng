import{a as z}from"./chunk-DBXTTL43.js";import{a as J}from"./chunk-JY552KI6.js";import{a as D,c as V,e as d,g as G,h as T,j,k as A,l as L,m as O,q as R,s as q}from"./chunk-DHROBJAE.js";import{c as K}from"./chunk-UD6HGDXN.js";import{Da as F,Ea as C,Ha as I,M as g,Oa as c,Pa as f,Qa as P,T as M,U as b,Ub as H,Wa as y,Ya as k,aa as o,ba as m,ia as x,ja as S,na as _,nb as B,oa as l,pb as N,qb as w,ub as E,wa as r,xa as s,ya as h}from"./chunk-7ZW7U2TK.js";var Q=(n,v)=>({"is-invalid":n,"is-valid":v});function U(n,v){if(n&1&&(r(0,"div",10),c(1),s()),n&2){let e,t=C();o(),P(" ",t.validationErrors(t.maxPerMonthErrors,(e=t.localisation.t.MaxPerMonth)!==null&&e!==void 0?e:"Max per month")," ")}}var rt=(()=>{class n extends J{constructor(e,t,i,a){super(),this.formBuilder=e,this.twa=t,this.service=i,this.location=a,this.settingForm=this.formBuilder.group({}),this.routeCreator=K,this.symbols=D}ngOnInit(){let e=this.service.item();this.settingForm.addControl("maxPerMonth",this.formBuilder.control(e.maxPerMonth??1e3,[d.required,d.min(1),d.max(1e9)])),this.settingFormSubscription=this.settingForm.statusChanges.subscribe(t=>this.twa.mainButtonIsActive(t=="VALID")),this.twa.backButtonOnClick(()=>this.goBack()),this.twa.setMainButton({text:this.localisation.t.Save??"Save",is_visible:!0,is_active:!0,has_shine_effect:!0},()=>this.save())}ngOnDestroy(){this.settingFormSubscription?.unsubscribe()}save(){if(this.settingForm.invalid)return;let e=this.settingForm.value;this.service.save(e),this.settingForm.reset(),this.goBack()}goBack(){this.location.back()}get maxPerMonth(){return this.settingForm.get("maxPerMonth")}get maxPerMonthErrors(){return this.errors(this.maxPerMonth)}get isInvalidMaxPerMonth(){return this.isInvalid(this.maxPerMonth)}static{this.\u0275fac=function(t){return new(t||n)(m(R),m(H),m(z),m(B))}}static{this.\u0275cmp=g({type:n,selectors:[["ng-component"]],standalone:!0,features:[x,y],decls:13,vars:10,consts:[[1,"accent-border","accent-border-top","accent-bg-shadow","card","rounded-5"],[1,"hstack","p-3","pb-0","color-accent"],[1,"m-auto","text-center","h5"],[1,"p-2","px-4"],[1,"bi",2,"width","2rem","height","2rem"],[1,"p-3",3,"ngSubmit","formGroup"],[1,"form-floating","mb-3"],["type","number","id","form-total","formControlName","maxPerMonth",1,"form-control",3,"placeholder","ngClass"],["for","form-total"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(t,i){if(t&1&&(r(0,"section",0)(1,"div",1)(2,"span",2),c(3),s(),r(4,"div",3),M(),r(5,"svg",4),h(6,"use"),s()()(),b(),r(7,"form",5),F("ngSubmit",function(){return i.save()}),r(8,"div",6),h(9,"input",7),r(10,"label",8),c(11),s(),S(12,U,2,1,"div",9),s()()()),t&2){let a,u,p;o(3),f((a=i.localisation.t.Settings)!==null&&a!==void 0?a:"Settings"),o(3),_("href","#"+i.symbols.gearFill,null,"xlink"),o(),l("formGroup",i.settingForm),o(2),I("placeholder",(u=i.localisation.t.MaxPerMonth)!==null&&u!==void 0?u:"Max per month"),l("ngClass",k(7,Q,i.isInvalidMaxPerMonth,i.settingForm.valid)),o(2),f((p=i.localisation.t.MaxPerMonth)!==null&&p!==void 0?p:"Max per month"),o(),l("ngIf",i.isInvalidMaxPerMonth)}},dependencies:[E,N,w,q,j,V,A,G,T,L,O],encapsulation:2})}}return n})();export{rt as SettingsComponent};
