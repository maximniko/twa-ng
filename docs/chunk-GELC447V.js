import{a as V,b as U}from"./chunk-2YOG37DJ.js";import{e as $}from"./chunk-ZWEVIVXB.js";import{b as S,d as c,e as x,f as b,j as q,k as _,l as N,m as G,n as P,o as W,p as D,r as M}from"./chunk-YAH7JT7V.js";import{$ as d,Ca as g,Ib as R,Jb as j,K as C,Ma as m,Na as A,Oa as f,Sa as h,Ta as y,Va as v,_ as o,ga as I,ha as u,j as B,lb as F,ma as s,mb as T,pb as E,sa as k,t as L,ta as w,ua as a,v as O,va as n,wa as p}from"./chunk-DIXJAQJD.js";var Y=(t,l)=>({"is-invalid":t,"is-valid":l});function Z(t,l){if(t&1&&(a(0,"div",4),m(1),n()),t&2){let e=g();o(),f(" ",e.validationErrors(e.tagErrors,"Title")," ")}}var z=(()=>{class t extends V{constructor(e){super(),this.formBuilder=e,this.tagTitles=[],this.search=r=>r.pipe(L(300),O(),B(i=>i.length<2?[]:this.tagTitles.filter(J=>J.toLowerCase().indexOf(i.toLowerCase())>-1).slice(0,10)))}ngOnInit(){this.parentForm.addControl("tag",this.formBuilder.control(this.transactionItem?.tag.title??"",[c.minLength(3),c.maxLength(32)]))}get tag(){return this.parentForm.get("tag")}get tagErrors(){return this.errors(this.tag)}get isInvalidTag(){return this.isInvalid(this.tag)}static{this.\u0275fac=function(r){return new(r||t)(d(D))}}static{this.\u0275cmp=C({type:t,selectors:[["transaction-tag-input"]],inputs:{transactionItem:"transactionItem",parentForm:"parentForm"},standalone:!0,features:[h([],[{provide:x,useExisting:_}]),I,y],decls:5,vars:7,consts:[[1,"form-floating","mb-3"],["type","text","placeholder","Title","id","form-tag","formControlName","tag",1,"form-control",3,"focusFirst","ngbTypeahead","ngClass"],["for","form-tag"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(r,i){r&1&&(a(0,"div",0),p(1,"input",1),a(2,"label",2),m(3,"Title"),n(),u(4,Z,2,1,"div",3),n()),r&2&&(o(),s("focusFirst",!0)("ngbTypeahead",i.search)("ngClass",v(4,Y,i.isInvalidTag,i.parentForm.valid)),o(3),s("ngIf",i.isInvalidTag))},dependencies:[E,F,T,M,S,b,N,$],encapsulation:2})}}return t})();var tt=(t,l)=>l.id,H=(t,l)=>({"is-invalid":t,"is-valid":l});function et(t,l){if(t&1&&(a(0,"option",2),m(1),n()),t&2){let e=l.$implicit;s("ngValue",e),o(),A(e.title)}}function it(t,l){if(t&1&&(a(0,"div",8),m(1),n()),t&2){let e=g();o(),f(" ",e.validationErrors(e.categoryErrors,"Category")," ")}}function rt(t,l){if(t&1&&(a(0,"div",8),m(1),n()),t&2){let e=g();o(),f(" ",e.validationErrors(e.totalErrors,"Total")," ")}}var Ct=(()=>{class t extends V{constructor(e,r){super(),this.formBuilder=e,this.categoriesService=r,this.categoriesList=[]}ngOnInit(){this.addControlCategory(),this.parentForm.addControl("total",this.formBuilder.control(this.transactionItem?.total??"",[c.required,c.min(1),c.max(1e9)]))}ngOnDestroy(){this.serviceSubscription?.unsubscribe()}compareCategory(e,r){return e&&r?e.id==r.id:!1}addControlCategory(){this.serviceSubscription=this.categoriesService.list(new j({})).subscribe(e=>{this.categoriesList=e}),this.parentForm.addControl("category",this.formBuilder.control(this.transactionItem?.category??this.categoryItem,[c.required]))}get category(){return this.parentForm.get("category")}get total(){return this.parentForm.get("total")}get categoryErrors(){return this.errors(this.category)}get totalErrors(){return this.errors(this.total)}get isInvalidCategory(){return this.isInvalid(this.category)}get isInvalidTotal(){return this.isInvalid(this.total)}static{this.\u0275fac=function(r){return new(r||t)(d(D),d(R))}}static{this.\u0275cmp=C({type:t,selectors:[["transaction-inputs"]],inputs:{transactionItem:"transactionItem",categoryItem:"categoryItem",parentForm:"parentForm"},standalone:!0,features:[h([],[{provide:x,useExisting:_}]),I,y],decls:14,vars:15,consts:[[1,"form-floating","mb-3"],["type","text","id","form-category","formControlName","category",1,"form-select",3,"ngClass","compareWith"],[3,"ngValue"],["for","form-category"],["class","invalid-feedback",4,"ngIf"],[3,"transactionItem","parentForm"],["type","number","placeholder","Total","id","form-total","formControlName","total",1,"form-control",3,"ngClass"],["for","form-total"],[1,"invalid-feedback"]],template:function(r,i){r&1&&(a(0,"div",0)(1,"select",1),k(2,et,2,2,"option",2,tt),n(),a(4,"label",3),m(5,"Category"),n(),u(6,it,2,1,"div",4),n(),p(7,"transaction-tag-input",5),a(8,"div",0),p(9,"input",6),a(10,"label",7),m(11,"Total"),n(),u(12,rt,2,1,"div",4),n(),p(13,"transaction-date-input",5)),r&2&&(o(),s("ngClass",v(9,H,i.isInvalidCategory,i.parentForm.valid))("compareWith",i.compareCategory),o(),w(i.categoriesList),o(4),s("ngIf",i.isInvalidCategory),o(),s("transactionItem",i.transactionItem)("parentForm",i.parentForm),o(2),s("ngClass",v(12,H,i.isInvalidTotal,i.parentForm.valid)),o(3),s("ngIf",i.isInvalidTotal),o(),s("transactionItem",i.transactionItem)("parentForm",i.parentForm))},dependencies:[E,F,T,M,P,W,S,q,G,b,N,z,U],encapsulation:2})}}return t})();export{Ct as a};
