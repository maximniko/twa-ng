import{n as g}from"./chunk-CTBJ2Y2T.js";import{f as v,h as x,m as C,n as M,o as k,q as I}from"./chunk-YAH7JT7V.js";import{$ as _,F as f,K as h,Ma as c,Nb as w,Ob as b,Pa as y,Qa as D,Ra as P,Ta as S,_ as n,e as u,ma as d,pb as T,ua as i,va as l}from"./chunk-DIXJAQJD.js";function F(t=0){let r=new Date,e=r.getDay()||7,a=t*7+(e-1),o=new Date(r);o.setDate(r.getDate()-a);let m=new Date(o);return m.setDate(o.getDate()+6),{from:o,to:m}}function R(t=0){let r=new Date,e=r.getMonth(),a=r.getFullYear();return e-=t,{from:new Date(a,e,1),to:new Date(a,e+1,0)}}var A=(()=>{class t{constructor(){this.nextFromTo=new u,this.page=0,this.maxPage=12,this._period=s.day,this.format={day:"numeric",month:"short"}}get period(){return this._period}resetPage(){this.page=0,this.nextFromTo.next(this.fromTo)}set period(e){e!=this._period&&(this._period=e,this.resetPage())}pageNext(){this.page<this.maxPage&&(this.page+=1,this.nextFromTo.next(this.fromTo))}pagePrev(){this.page>0&&(this.page-=1,this.nextFromTo.next(this.fromTo))}get fromTo(){switch(this.period){case s.day:let e=new Date,a=new Date;return e.setDate(e.getDate()-this.page-1),a.setDate(a.getDate()-this.page),{from:e,to:a};case s.week:return F(this.page);case s.month:return R(this.page)}}getPeriodString(){let e=this.fromTo;return this.page===0||this.period==s.day?this.label(e.to):`${this.label(e.from)} - ${this.label(e.to)}`}label(e){if(this.page>0){if(this.period===s.day){let a=g(this.format);return a.weekday="short",e.toLocaleDateString("ru-RU",a)}return e.toLocaleDateString("ru-RU",this.format)}switch(this.period){case s.day:return"Today";case s.week:return"This week";case s.month:return"This month"}}isLastPage(){return this.page>=this.maxPage}isFirstPage(){return this.page<1}get coefficient(){switch(this.period){case s.day:return 1/b();case s.week:return 1/w();case s.month:return 1}}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),s=function(t){return t.day="day",t.week="week",t.month="month",t}(s||{});var na=(()=>{class t{constructor(e){this.filter=e,this.Period=s}setPeriod(e){console.log(e),this.filter.period=e}isSelected(e){return this.filter.period==e}static{this.\u0275fac=function(a){return new(a||t)(_(A))}}static{this.\u0275cmp=h({type:t,selectors:[["period-selector"]],standalone:!0,features:[S],decls:10,vars:4,consts:[[1,"form-floating","ms-auto"],["id","period","aria-label","Select period",1,"form-select","rounded-4",3,"ngModelChange","ngModel"],[3,"ngValue"],["for","period"]],template:function(a,o){a&1&&(i(0,"div",0)(1,"select",1),P("ngModelChange",function(p){return D(o.filter.period,p)||(o.filter.period=p),p}),i(2,"option",2),c(3,"Day"),l(),i(4,"option",2),c(5,"Week"),l(),i(6,"option",2),c(7,"Month"),l()(),i(8,"label",3),c(9,"Period"),l()()),a&2&&(n(),y("ngModel",o.filter.period),n(),d("ngValue",o.Period.day),n(2),d("ngValue",o.Period.week),n(2),d("ngValue",o.Period.month))},dependencies:[T,I,M,k,C,v,x],encapsulation:2})}}return t})();export{A as a,na as b};
