import{n as _}from"./chunk-CTBJ2Y2T.js";import{g as C,i as M,n as k,o as F,p as R,r as A}from"./chunk-DHROBJAE.js";import{H as D,M as P,Oa as p,Pa as m,Sa as T,Sb as x,Ta as S,Tb as I,Ua as v,Vb as E,Wa as w,aa as i,ba as h,g as y,oa as u,ub as b,wa as d,xa as c}from"./chunk-7ZW7U2TK.js";function B(a=0){let l=new Date,e=l.getDay()||7,t=a*7+(e-1),o=new Date(l);o.setDate(l.getDate()-t);let r=new Date(o);return r.setDate(o.getDate()+6),{from:o,to:r}}function O(a=0){let l=new Date,e=l.getMonth(),t=l.getFullYear();return e-=a,{from:new Date(t,e,1),to:new Date(t,e+1,0)}}var L=(()=>{class a{constructor(){this.nextFromTo=new y,this.page=0,this.maxPage=12,this._period=s.day,this.format={day:"numeric",month:"short"}}get period(){return this._period}resetPage(){this.page=0,this.nextFromTo.next(this.fromTo)}set period(e){e!=this._period&&(this._period=e,this.resetPage())}pageNext(){this.page<this.maxPage&&(this.page+=1,this.nextFromTo.next(this.fromTo))}pagePrev(){this.page>0&&(this.page-=1,this.nextFromTo.next(this.fromTo))}get fromTo(){switch(this.period){case s.day:let e=new Date,t=new Date;return e.setDate(e.getDate()-this.page-1),t.setDate(t.getDate()-this.page),{from:e,to:t};case s.week:return B(this.page);case s.month:return O(this.page)}}getPeriodString(){let e=this.fromTo;return this.page===0||this.period==s.day?this.label(e.to):`${this.label(e.from)} - ${this.label(e.to)}`}label(e){if(this.page>0){if(this.period===s.day){let t=_(this.format);return t.weekday="short",e.toLocaleDateString("ru-RU",t)}return e.toLocaleDateString("ru-RU",this.format)}switch(this.period){case s.day:return"Today";case s.week:return"This week";case s.month:return"This month"}}isLastPage(){return this.page>=this.maxPage}isFirstPage(){return this.page<1}get coefficient(){switch(this.period){case s.day:return 1/I();case s.week:return 1/x();case s.month:return 1}}static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275prov=D({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),s=function(a){return a.day="day",a.week="week",a.month="month",a}(s||{});var ma=(()=>{class a{constructor(e,t){this.filter=e,this.localisation=t,this.Period=s}static{this.\u0275fac=function(t){return new(t||a)(h(L),h(E))}}static{this.\u0275cmp=P({type:a,selectors:[["period-selector"]],standalone:!0,features:[w],decls:10,vars:8,consts:[[1,"form-floating","ms-auto"],["id","period","aria-label","Select period",1,"form-select","rounded-4",3,"ngModelChange","ngModel"],[3,"ngValue"],["for","period"]],template:function(t,o){if(t&1&&(d(0,"div",0)(1,"select",1),v("ngModelChange",function(n){return S(o.filter.period,n)||(o.filter.period=n),n}),d(2,"option",2),p(3),c(),d(4,"option",2),p(5),c(),d(6,"option",2),p(7),c()(),d(8,"label",3),p(9),c()()),t&2){let r,n,g,f;i(),T("ngModel",o.filter.period),i(),u("ngValue",o.Period.day),i(),m((r=o.localisation.t.Day)!==null&&r!==void 0?r:"Day"),i(),u("ngValue",o.Period.week),i(),m((n=o.localisation.t.Week)!==null&&n!==void 0?n:"Week"),i(),u("ngValue",o.Period.month),i(),m((g=o.localisation.t.Month)!==null&&g!==void 0?g:"Month"),i(2),m((f=o.localisation.t.Period)!==null&&f!==void 0?f:"Period")}},dependencies:[b,A,F,R,k,C,M],encapsulation:2})}}return a})();export{L as a,ma as b};
