import{a as $}from"./chunk-IOE6GASO.js";import{a as B,b as P}from"./chunk-7JAAA2YT.js";import{c as A}from"./chunk-EQ6DK4UO.js";import{a as b}from"./chunk-VKM6DCX6.js";import{a as y}from"./chunk-L2LZDF6K.js";import{Ab as R,Ba as T,Da as O,Ea as u,Hb as V,Jb as _,M as d,Na as j,Oa as m,Pa as x,R as w,S as D,Sa as h,T as I,U as M,aa as s,ba as C,ja as f,lb as g,mb as F,na as k,oa as l,ra as v,ua as L,va as E,wa as r,xa as a,ya as c}from"./chunk-B4RSPJCF.js";var G=(()=>{class t{constructor(){this.chartCategories=[],this.doughnutChartLabels=[],this.doughnutChartDatasets=[],this.doughnutChartOptions={animation:{animateRotate:!0,animateScale:!0},responsive:!0}}ngOnInit(){this.initChartData()}initChartData(){let i=this.chartCategories.reduce((o,p,q)=>(q<5?(o.labels.push(p.category.title),o.backgroundColors.push(p.color),o.data.push(p.total)):(o.labels[5]="Others",o.backgroundColors.push("#999"),o.data[5]=(o.data[5]??0)+p.total),o),{labels:[],backgroundColors:[],data:[]});this.doughnutChartLabels.push(...i.labels),this.doughnutChartDatasets.push({data:i.data,label:"sum",borderWidth:1,backgroundColor:i.backgroundColors})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=d({type:t,selectors:[["chart-categories-doughnut"]],inputs:{chartCategories:"chartCategories"},standalone:!0,features:[h],decls:1,vars:5,consts:[["baseChart","",3,"labels","datasets","options","legend","type"]],template:function(i,o){i&1&&c(0,"canvas",0),i&2&&l("labels",o.doughnutChartLabels)("datasets",o.doughnutChartDatasets)("options",o.doughnutChartOptions)("legend",!0)("type","doughnut")},dependencies:[g,A],encapsulation:2})}}return t})();var J=(t,n)=>n.category.id;function K(t,n){if(t&1){let e=T();r(0,"div",1)(1,"div",2)(2,"div",3),m(3),a()(),r(4,"div",4)(5,"div",5)(6,"div",6),m(7),a(),r(8,"span",7),O("click",function(){let o=w(e).$implicit,p=u(2);return D(p.popup(o.category))}),I(),r(9,"svg",8),c(10,"use"),a()()(),M(),r(11,"div",5)(12,"div"),m(13,"Sum:"),a(),r(14,"div"),m(15),a()()(),r(16,"a",9),I(),r(17,"svg",8),c(18,"use"),a()()()}if(t&2){let e=n.$implicit,i=u(2);s(),j("width:4rem;height:4rem;background-color:",e.color,";"),s(2),x(e.category.label),s(4),x(e.category.title),s(3),k("href","#"+i.symbols.infoCircle,null,"xlink"),s(5),x(e.total),s(),l("routerLink",i.routeCreator.chartCategory(e.category)),s(2),k("href","#"+i.symbols.chevronRight,null,"xlink")}}function N(t,n){if(t&1&&(r(0,"div",0),L(1,K,19,9,"div",1,J),a()),t&2){let e=u();s(),E(e.chartCategories)}}var W=(()=>{class t{constructor(e){this.twa=e,this.chartCategories=[],this.routeCreator=_,this.symbols=b}popup(e){this.twa.showPopup({title:`Category Info: ${e.title}`.slice(0,64),message:e.description.slice(0,256),buttons:[{type:"close"}]},()=>{})}static{this.\u0275fac=function(i){return new(i||t)(C(y))}}static{this.\u0275cmp=d({type:t,selectors:[["chart-categories-list"]],inputs:{chartCategories:"chartCategories"},standalone:!0,features:[h],decls:1,vars:1,consts:[[1,"list-group"],[1,"list-group-item","hstack","pe-0"],[1,"rounded-circle","d-flex"],[1,"m-auto"],[1,"vstack","ps-3","jcc"],[1,"jcb"],[1,"text-truncate"],[1,"btn","tg-btn",3,"click"],[1,"bi"],[1,"jcc","px-4",3,"routerLink"]],template:function(i,o){i&1&&f(0,N,3,0,"div",0),i&2&&v(o.chartCategories.length?0:-1)},dependencies:[g,R],encapsulation:2})}}return t})();var S=class{constructor(n){this.params=n}toHttpParams(){let n={};return this.params.categoryId&&(n.categoryId=this.params.categoryId),this.params.from&&(n.from=this.params.from.toISOString()),this.params.to&&(n.to=this.params.to.toISOString()),new F({fromObject:n})}filter(n){return this.params.categoryId?n.category.id==this.params.categoryId:V(this.params)}};function Q(t,n){if(t&1&&(r(0,"div",3),c(1,"chart-categories-doughnut",4),a(),r(2,"div",3),c(3,"chart-categories-list",4),a()),t&2){let e=u();s(),l("chartCategories",e.chartCategories),s(2),l("chartCategories",e.chartCategories)}}function U(t,n){t&1&&(r(0,"div",3)(1,"div"),m(2," Add first transaction "),a()())}var ft=(()=>{class t{constructor(e,i){this.twa=e,this.service=i,this.chartCategories=[],this.routeCreator=_,this.symbols=b,this.service.list(new S({})).subscribe(o=>this.chartCategories=o)}ngOnInit(){this.initChartCategories(),this.twa.visibleBackButton(!1),this.twa.setMainButton({text:"Add transaction",is_active:!0,is_visible:!0,has_shine_effect:!0},()=>{})}initChartCategories(){}static{this.\u0275fac=function(i){return new(i||t)(C(y),C($))}}static{this.\u0275cmp=d({type:t,selectors:[["ng-component"]],hostAttrs:[1,"d-flex","flex-column","h-100"],standalone:!0,features:[h],decls:8,vars:1,consts:[[1,"accent-border","accent-border-top","accent-bg-shadow","card","rounded-5"],[1,"hstack","p-3","pb-0"],[1,"m-auto","text-center","h5"],[1,"card-body","p-2"],[3,"chartCategories"]],template:function(i,o){i&1&&(r(0,"section",0)(1,"div",1)(2,"span",2),m(3,"\u0421alculations"),a(),c(4,"period-selector"),a(),f(5,Q,4,2)(6,U,3,0,"div",3),c(7,"period-pagination"),a()),i&2&&(s(5),v(o.chartCategories.length?5:6))},dependencies:[g,G,W,B,P],encapsulation:2})}}return t})();export{ft as MainComponent};
