import{n as _}from"./chunk-CTBJ2Y2T.js";import{g as M,i as k,n as F,o as A,p as R,r as E}from"./chunk-DHROBJAE.js";import{H as D,K as P,M as S,Oa as m,Pa as p,Sa as v,Sb as I,Ta as T,Tb as C,Ua as w,Ub as B,Vb as O,Wa as b,aa as i,ba as h,g as y,oa as u,ub as x,wa as d,xa as c}from"./chunk-7ZW7U2TK.js";function L(a=0){let l=new Date,e=l.getDay()||7,t=a*7+(e-1),o=new Date(l);o.setDate(l.getDate()-t);let n=new Date(o);return n.setDate(o.getDate()+6),{from:o,to:n}}function W(a=0){let l=new Date,e=l.getMonth(),t=l.getFullYear();return e-=a,{from:new Date(t,e,1),to:new Date(t,e+1,0)}}var N=(()=>{class a{get period(){return this._period}constructor(e){this.twa=e,this.nextFromTo=new y,this.page=0,this.maxPage=12,this._period=s.day,this.format={day:"numeric",month:"short"}}resetPage(){this.page=0,this.nextFromTo.next(this.fromTo)}set period(e){e!=this._period&&(this._period=e,this.resetPage())}pageNext(){this.page<this.maxPage&&(this.page+=1,this.nextFromTo.next(this.fromTo))}pagePrev(){this.page>0&&(this.page-=1,this.nextFromTo.next(this.fromTo))}get fromTo(){switch(this.period){case s.day:let e=new Date,t=new Date;return e.setDate(e.getDate()-this.page-1),t.setDate(t.getDate()-this.page),{from:e,to:t};case s.week:return L(this.page);case s.month:return W(this.page)}}getPeriodString(){let e=this.fromTo;return this.page===0||this.period==s.day?this.label(e.to):`${this.label(e.from)} - ${this.label(e.to)}`}label(e){let t=this.twa.getUserLanguageCode()??"en";if(this.period===s.day){let o=_(this.format);return o.weekday="short",e.toLocaleDateString(t,o)}return e.toLocaleDateString(t,this.format)}isLastPage(){return this.page>=this.maxPage}isFirstPage(){return this.page<1}get coefficient(){switch(this.period){case s.day:return 1/C();case s.week:return 1/I();case s.month:return 1}}static{this.\u0275fac=function(t){return new(t||a)(P(B))}}static{this.\u0275prov=D({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),s=function(a){return a.day="day",a.week="week",a.month="month",a}(s||{});var fa=(()=>{class a{constructor(e,t){this.filter=e,this.localisation=t,this.Period=s}static{this.\u0275fac=function(t){return new(t||a)(h(N),h(O))}}static{this.\u0275cmp=S({type:a,selectors:[["period-selector"]],standalone:!0,features:[b],decls:10,vars:8,consts:[[1,"form-floating","ms-auto"],["id","period","aria-label","Select period",1,"form-select","rounded-4",3,"ngModelChange","ngModel"],[3,"ngValue"],["for","period"]],template:function(t,o){if(t&1&&(d(0,"div",0)(1,"select",1),w("ngModelChange",function(r){return T(o.filter.period,r)||(o.filter.period=r),r}),d(2,"option",2),m(3),c(),d(4,"option",2),m(5),c(),d(6,"option",2),m(7),c()(),d(8,"label",3),m(9),c()()),t&2){let n,r,g,f;i(),v("ngModel",o.filter.period),i(),u("ngValue",o.Period.day),i(),p((n=o.localisation.t.Day)!==null&&n!==void 0?n:"Day"),i(),u("ngValue",o.Period.week),i(),p((r=o.localisation.t.Week)!==null&&r!==void 0?r:"Week"),i(),u("ngValue",o.Period.month),i(),p((g=o.localisation.t.Month)!==null&&g!==void 0?g:"Month"),i(2),p((f=o.localisation.t.Period)!==null&&f!==void 0?f:"Period")}},dependencies:[x,E,A,R,F,M,k],encapsulation:2})}}return a})();export{N as a,fa as b};
