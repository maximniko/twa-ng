import{a as D,b as p,c as _,d as E,g as X,h as b,i as S,j as Y,k as Z,l as tt,m as N,n as V,o as B,p as et,q as it,r as nt,s as rt}from"./chunk-KGX5KJP2.js";import{Ba as P,Da as G,Ea as g,Eb as Q,Fb as W,M as c,Ma as J,Oa as m,Pa as U,Qa as u,R,Ra as C,S as O,Sa as y,Ua as v,Wa as z,Xa as H,aa as r,ba as d,hb as F,ia as h,ib as T,ja as f,kb as K,l as w,lb as x,oa as l,ua as q,v as L,va as A,wa as s,x as j,xa as a,ya as I}from"./chunk-B4RSPJCF.js";var M=(()=>{class e{isInvalid(t){return t?.invalid&&(t?.dirty||t?.touched)}errors(t){return t?.errors}validationErrors(t,n){if(!t)return null;let i=[];return t?.required&&i.push(`${n} is required.`),t?.minlength&&i.push(`Minimum length of ${n} is ${t?.minlength.requiredLength}.`),t?.maxlength&&i.push(`Maximum length of ${n} is ${t?.maxlength.requiredLength}.`),t?.email&&i.push(`${n} must be an email address.`),t?.pattern&&i.push(`${n} is not valid.`),t?.invalidPhone&&i.push(`${n} is invalid phone.`),t?.invalidType&&i.push(`${n} is invalid type.`),i.join(`
`)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=c({type:e,selectors:[["ng-component"]],decls:0,vars:0,template:function(n,i){},encapsulation:2})}}return e})();function ot(e){return o=>{if(typeof o.value=="object"){if(!e.includes(o.value))return{invalidType:!0}}else if(e.indexOf(o.value)<0)return{invalidType:!0};return null}}function at(e){return o=>{let t=o.value;if(t&&typeof t=="string"){let i=t.match(/^([10]\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/);if(i){if(i&&i[0]!==t)return{invalidType:!0}}else return{invalidType:!0}}let n=B.from(t);return n instanceof B&&(n.after(e),n.after(e))?{invalidType:!0}:null}}var ut=(e,o)=>({"is-invalid":e,"is-valid":o});function ft(e,o){if(e&1&&(s(0,"div",4),m(1),a()),e&2){let t=g();r(),u(" ",t.validationErrors(t.tagErrors,"Title")," ")}}var mt=(()=>{class e extends M{constructor(t){super(),this.formBuilder=t,this.tagTitles=[],this.search=n=>n.pipe(L(300),j(),w(i=>i.length<2?[]:this.tagTitles.filter(k=>k.toLowerCase().indexOf(i.toLowerCase())>-1).slice(0,10)))}ngOnInit(){this.parentForm.addControl("tag",this.formBuilder.control(this.transactionItem?.tag.title??"",[p.minLength(3),p.maxLength(32)]))}get tag(){return this.parentForm.get("tag")}get tagErrors(){return this.errors(this.tag)}get isInvalidTag(){return this.isInvalid(this.tag)}static{this.\u0275fac=function(n){return new(n||e)(d(N))}}static{this.\u0275cmp=c({type:e,selectors:[["transaction-tag-input"]],inputs:{transactionItem:"transactionItem",parentForm:"parentForm"},standalone:!0,features:[C([],[{provide:_,useExisting:b}]),h,y],decls:5,vars:6,consts:[[1,"form-floating","mb-3"],["type","text","placeholder","Title","id","form-tag","formControlName","tag",1,"form-control",3,"ngbTypeahead","ngClass"],["for","form-tag"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(n,i){n&1&&(s(0,"div",0),I(1,"input",1),s(2,"label",2),m(3,"Title"),a(),f(4,ft,2,1,"div",3),a()),n&2&&(r(),l("ngbTypeahead",i.search)("ngClass",v(3,ut,i.isInvalidTag,i.parentForm.valid)),r(3),l("ngIf",i.isInvalidTag))},dependencies:[x,F,T,V,D,E,S,rt],encapsulation:2})}}return e})();var gt=(e,o)=>({"is-invalid":e,"is-valid":o});function vt(e,o){if(e&1&&(s(0,"div",5),m(1),a()),e&2){let t=g();r(),u(" ",t.validationErrors(t.dateErrors,"Date")," ")}}var dt=(()=>{class e extends M{constructor(t,n,i){super(),this.formBuilder=t,this.config=n,this.calendar=i,this.today=this.calendar.getToday(),n.maxDate=this.today,n.startDate=this.today,n.navigation="select"}ngOnInit(){this.parentForm.addControl("date",this.formBuilder.control(this.today,[p.required,at(this.today)]))}get date(){return this.parentForm.get("date")}get dateErrors(){return this.errors(this.date)}get isInvalidDate(){return this.isInvalid(this.date)}static{this.\u0275fac=function(n){return new(n||e)(d(N),d(it),d(et))}}static{this.\u0275cmp=c({type:e,selectors:[["transaction-date-input"]],inputs:{transactionItem:"transactionItem",parentForm:"parentForm"},standalone:!0,features:[C([],[{provide:_,useExisting:b}]),h,y],decls:6,vars:5,consts:[["d","ngbDatepicker"],[1,"form-floating","mb-3"],["id","form-date","placeholder","yyyy-mm-dd","formControlName","date","ngbDatepicker","",1,"form-control",3,"click","ngClass"],["for","form-date"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"]],template:function(n,i){if(n&1){let k=P();s(0,"div",1)(1,"input",2,0),G("click",function(){R(k);let ct=J(2);return O(ct.toggle())}),a(),s(3,"label",3),m(4,"Date"),a(),f(5,vt,2,1,"div",4),a()}n&2&&(r(),l("ngClass",v(2,gt,i.isInvalidDate,i.parentForm.valid)),r(4),l("ngIf",i.isInvalidDate))},dependencies:[x,F,T,V,D,E,S,nt],encapsulation:2})}}return e})();var ht=(e,o)=>o.id,pt=(e,o)=>({"is-invalid":e,"is-valid":o});function It(e,o){if(e&1&&(s(0,"option",2),m(1),a()),e&2){let t=o.$implicit;l("ngValue",t),r(),U(t.title)}}function Ct(e,o){if(e&1&&(s(0,"div",8),m(1),a()),e&2){let t=g();r(),u(" ",t.validationErrors(t.categoryErrors,"Category")," ")}}function yt(e,o){if(e&1&&(s(0,"div",8),m(1),a()),e&2){let t=g();r(),u(" ",t.validationErrors(t.totalErrors,"Total")," ")}}var zt=(()=>{class e extends M{constructor(t,n){super(),this.formBuilder=t,this.categoriesService=n,this.categoriesList=[]}ngOnInit(){this._initCategories(),this.parentForm.addControl("total",this.formBuilder.control(this.transactionItem?.total??"",[p.min(1),p.max(1e9)]))}_initCategories(){this.categoriesService.list(new W({})).subscribe(t=>{this.categoriesList=t,this.parentForm.addControl("category",this.formBuilder.control(this.transactionItem?.category,[p.required,ot(this.categoriesList)]))})}get category(){return this.parentForm.get("category")}get total(){return this.parentForm.get("total")}get categoryErrors(){return this.errors(this.category)}get totalErrors(){return this.errors(this.total)}get isInvalidCategory(){return this.isInvalid(this.category)}get isInvalidTotal(){return this.isInvalid(this.total)}static{this.\u0275fac=function(n){return new(n||e)(d(N),d(Q))}}static{this.\u0275cmp=c({type:e,selectors:[["transaction-inputs"]],inputs:{transactionItem:"transactionItem",parentForm:"parentForm"},standalone:!0,features:[C([],[{provide:_,useExisting:b}]),h,y],decls:18,vars:17,consts:[[1,"form-floating","mb-3"],["type","text","id","form-category","formControlName","category",1,"form-select",3,"ngClass"],[3,"ngValue"],["for","form-category"],["class","invalid-feedback",4,"ngIf"],[3,"transactionItem","parentForm"],["type","number","placeholder","Total","id","form-total","formControlName","total",1,"form-control",3,"ngClass"],["for","form-total"],[1,"invalid-feedback"]],template:function(n,i){n&1&&(s(0,"div",0)(1,"select",1)(2,"option"),m(3,"Select category"),a(),q(4,It,2,2,"option",2,ht),a(),s(6,"label",3),m(7,"Category"),a(),f(8,Ct,2,1,"div",4),a(),I(9,"transaction-tag-input",5),s(10,"div",0),I(11,"input",6),s(12,"label",7),m(13,"Total"),a(),f(14,yt,2,1,"div",4),a(),I(15,"transaction-date-input",5),m(16),z(17,"json")),n&2&&(r(),l("ngClass",v(11,pt,i.isInvalidCategory,i.parentForm.valid)),r(3),A(i.categoriesList),r(4),l("ngIf",i.isInvalidCategory),r(),l("transactionItem",i.transactionItem)("parentForm",i.parentForm),r(2),l("ngClass",v(14,pt,i.isInvalidTotal,i.parentForm.valid)),r(3),l("ngIf",i.isInvalidTotal),r(),l("transactionItem",i.transactionItem)("parentForm",i.parentForm),r(),u(`
`,H(17,9,i.parentForm.value),`
`))},dependencies:[x,F,T,K,V,Z,tt,D,X,Y,E,S,mt,dt],encapsulation:2})}}return e})();export{M as a,zt as b};
